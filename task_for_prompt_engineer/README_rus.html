<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2024-03-03 Sun 08:03 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>&lrm;</title>
<meta name="generator" content="Org Mode" />
<style>
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
</head>
<body>
<div id="content" class="content">
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org11850c1">1. Задание</a></li>
<li><a href="#org0a029b6">2. Решение</a></li>
<li><a href="#org514ea06">3. Предложение по улучшению</a>
<ul>
<li><a href="#orgfbd928c">3.1. Проблемы, которые я вижу:</a></li>
<li><a href="#org25bcf08">3.2. Дальнейшее улучшение кода</a></li>
</ul>
</li>
<li><a href="#org02fbbf0">4. Код решения</a>
<ul>
<li>
<ul>
<li><a href="#org47af2a7">4.0.1. Colors</a></li>
</ul>
</li>
<li><a href="#org0282c9e">4.1. Create csv file</a></li>
<li><a href="#org644d376">4.2. Главный запрос к YandexGPT</a></li>
</ul>
</li>
<li><a href="#org429d341">5. Заключение</a></li>
</ul>
</div>
</div>
<div id="outline-container-org11850c1" class="outline-2">
<h2 id="org11850c1"><span class="section-number-2">1.</span> Задание</h2>
<div class="outline-text-2" id="text-1">
<p>
Создать отзывы клиентов о продукте и попытаться скрыть, что отзыв был сгенерирован с помощью LLM.
</p>

<p>
Вы можете использовать любой LLM.
</p>

<p>
Вы должны сделать это за 3 дня.
</p>
</div>
</div>

<div id="outline-container-org0a029b6" class="outline-2">
<h2 id="org0a029b6"><span class="section-number-2">2.</span> Решение</h2>
<div class="outline-text-2" id="text-2">
<p>
Я использовал базовые инструменты: POSIX Shell который будет работать на любой *nix системе или POSIX совместимой.
curl (для запросов API) + jq (для обработки JSON).
</p>

<p>
Поскольку требования к сложности будут расти, для правильного выбора сложных инструментов лучше начать с базовых.
</p>

<p>
Два дня я потратил на доступ к API YandexGPT: ввод номера кредитной карты и номера телефона, получение идентификатора облака и т.д.
</p>

<p>
Один день я потратил на написание кода и написание данного отчета о решении, которое генерирует отзывы от клиентов.
</p>

<p>
Я создал этот CSV-файл: TODO!!!!!!!
</p>

<p>
Я добавил случайность к отзыву с подсказкой "посмотрите на этот цвет", случайный цвет добавляет эмоциональный окрас к модели и изменяет ее внутреннее состояние.
</p>

<p>
Я сделал простую попытку скрыть интеллект LLM улыбками.
</p>

<p>
Я не пытался использовать цепочку запросов.
</p>
</div>
</div>

<div id="outline-container-org514ea06" class="outline-2">
<h2 id="org514ea06"><span class="section-number-2">3.</span> Предложение по улучшению</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-orgfbd928c" class="outline-3">
<h3 id="orgfbd928c"><span class="section-number-3">3.1.</span> Проблемы, которые я вижу:</h3>
<div class="outline-text-3" id="text-3-1">
<ul class="org-ul">
<li>Цензура в LLM при генерации</li>
<li>Проблема стохастического поведения в LLM</li>
<li>Скрытие интеллекта в LLM</li>
<li>Цензура при публикации</li>
<li>Недостаточно случайности</li>
</ul>

<p>
Вижу три способа борьбы с цензурой:
</p>
<ul class="org-ul">
<li>Самостоятельно обученные модели с уникальными характеристиками как у человека</li>
<li>Цепи передовых и постоянно меняющихся техник обработки запросов для диалогов с корпоративными
LLM, возможно с НС, постоянно ищущие новые уязвимости</li>
<li>Генеративно-состязательные сети (GAN), которые симулируют корпоративную цензуру для
"отпора/первого удара"</li>
</ul>

<p>
Для скрытия интеллекта и добавления случайности, думаю, должно быть достаточно тщательного создания запроса.
</p>

<p>
Проблема стохастического поведения – сложная проблема, связанная с ограничениями текущих LLM и оборудования.
</p>
</div>
</div>

<div id="outline-container-org25bcf08" class="outline-3">
<h3 id="org25bcf08"><span class="section-number-3">3.2.</span> Дальнейшее улучшение кода</h3>
<div class="outline-text-3" id="text-3-2">
<ol class="org-ol">
<li>Нужно быть более тщательным с обработкой ошибок</li>
<li>Следует сравнить с другими решениями подобного рода</li>
<li>Скрытие интеллекта должно быть гораздо более тщательным</li>
<li>Необходимо добавить больше случайности с предварительным сбором данных, например, профессии пользователей, пола и т. д.</li>
<li>Цепь запросов должна быть протестирована и рассмотрена.</li>
</ol>
</div>
</div>
</div>
<div id="outline-container-org02fbbf0" class="outline-2">
<h2 id="org02fbbf0"><span class="section-number-2">4.</span> Код решения</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-org47af2a7" class="outline-4">
<h4 id="org47af2a7"><span class="section-number-4">4.0.1.</span> Colors</h4>
<div class="outline-text-4" id="text-4-0-1">
<pre class="example" id="orge3697ae">
1. Ализариновый
2. Антрацитовый
3. Баклажан
4. Берилловый
5. Бирюзовый
6. Бланжевый
7. Бронзовый
8. Бургундия
9. Виридиан
10. Гранатовый
11. Гридеперлевый
12. Грушевый
13. Деним
14. Жжёного апельсина
15. Индиго
16. Какао
17. Карри
18. Кофейный
19. Кремовый
20. Лазурный
21. Лаймовый
22. Лавандовый
23. Лиловый
24. Маджента
25. Маковый
26. Маренго
27. Насыщенный синий
28. Оливковый
29. Охра
30. Палевый
31. Пюсовый
32. Пыльная роза
33. Ржавый
34. Сапфировый
35. Серебристый
36. Сизый
37. Сиреневый
38. Слоновая кость
39. Тауповый
40. Терракотовый
41. Тиффани
42. Ультрамарин
43. Умбра
44. Фисташковый
45. Фуксия
46. Хаки
47. Цвет морской волны
48. Цвет шампанского
49. Чернильный
50. Шоколадный
</pre>

<div class="org-src-container">
<pre class="src src-bash"><span style="color: #cae682; font-weight: bold;">get_color</span>( ) {
    <span style="color: #cae682;">c</span>=$(<span style="color: #fa8072;">cat | grep -o " .*" | tr -d ' '</span>)
    <span style="color: #cae682;">count</span>=$(<span style="color: #fa8072;">echo "$c" | wc -l</span>)
    <span style="color: #cae682;">random_line_n</span>=$(<span style="color: #fa8072;">shuf -i 1-$count -n 1</span>)
    <span style="color: #e5786d;">echo</span> <span style="color: #95e454;">"$c"</span> | sed <span style="color: #95e454;">"$random_line_n!d"</span>
}
get_color
</pre>
</div>
</div>
</div>

<div id="outline-container-org0282c9e" class="outline-3">
<h3 id="org0282c9e"><span class="section-number-3">4.1.</span> Create csv file</h3>
<div class="outline-text-3" id="text-4-1">
<div class="org-src-container">
<pre class="src src-bash"><span style="color: #e5786d;">echo</span> <span style="color: #95e454;">"&#1058;&#1086;&#1085;&#1072;&#1083;&#1100;&#1085;&#1086;&#1089;&#1090;&#1100;,&#1058;&#1077;&#1082;&#1089;&#1090;"</span> &gt; /tmp/dobri_vigruzka.csv
</pre>
</div>
</div>
</div>

<div id="outline-container-org644d376" class="outline-3">
<h3 id="org644d376"><span class="section-number-3">4.2.</span> Главный запрос к YandexGPT</h3>
<div class="outline-text-3" id="text-4-2">
<div class="org-src-container">
<pre class="src src-bash"><span style="color: #e5786d;">alias</span> <span style="color: #cae682;">curl</span>=<span style="color: #95e454;">"proxychains -f /home/u/proxychains.conf curl 2&gt;/dev/null"</span>

<span style="color: #cae682; font-weight: bold;">get_color</span>( ) {
    <span style="color: #cae682;">c</span>=$(<span style="color: #fa8072;">cat | grep -o " .*" | tr -d ' '</span>)
    <span style="color: #cae682;">count</span>=$(<span style="color: #fa8072;">echo "$c" | wc -l</span>)
    <span style="color: #cae682;">random_line_n</span>=$(<span style="color: #fa8072;">shuf -i 1-$count -n 1</span>)
    <span style="color: #e5786d;">echo</span> <span style="color: #95e454;">"$c"</span> | sed <span style="color: #95e454;">"$random_line_n!d"</span>
}


<span style="color: #cae682;">yandexPassportOauthToken</span>=y0_AgAAAABsj07pAATuwXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
<span style="color: #cae682;">FOLDERNAME</span>=default

<span style="color: #8ac6f2; font-weight: bold;">if</span> [ -z <span style="color: #95e454;">"$IAM_TOKEN"</span> ]; <span style="color: #8ac6f2; font-weight: bold;">then</span>
    <span style="color: #cae682;">IAM_TOKEN</span>=$(<span style="color: #fa8072;">curl -s -d "{\"yandexPassportOauthToken\":\"$yandexPassportOauthToken\"}" "https://iam.api.cloud.yandex.net/iam/v1/tokens" | jq -r .iamToken</span>)
<span style="color: #8ac6f2; font-weight: bold;">fi</span>
<span style="color: #8ac6f2; font-weight: bold;">if</span> [ -z <span style="color: #95e454;">"$CLOUD_ID"</span> ]; <span style="color: #8ac6f2; font-weight: bold;">then</span>
    <span style="color: #cae682;">CLOUD_ID</span>=$(<span style="color: #fa8072;">curl -s -H "Authorization: Bearer $IAM_TOKEN" https://resource-manager.api.cloud.yandex.net/resource-manager/v1/clouds | jq -r .clouds[0].id</span>) <span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">&#1087;&#1086;&#1083;&#1091;&#1095;&#1080;&#1090;&#1100; cloud id</span>
<span style="color: #8ac6f2; font-weight: bold;">fi</span>
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">curl -s --request GET -H "Authorization: Bearer $IAM_TOKEN" https://resource-manager.api.cloud.yandex.net/resource-manager/v1/folders -d "{\"cloudId\": \"$CLOUD_ID\"}" # &#1087;&#1086;&#1083;&#1091;&#1095;&#1080;&#1090;&#1100; &#1089;&#1087;&#1080;&#1089;&#1086;&#1082; &#1076;&#1080;&#1088;&#1077;&#1082;&#1090;&#1086;&#1088;&#1080;&#1081; &#1074; &#1086;&#1073;&#1083;&#1072;&#1082;&#1077;</span>
<span style="color: #8ac6f2; font-weight: bold;">if</span> [ -z <span style="color: #95e454;">"$FOLDER_ID"</span> ]; <span style="color: #8ac6f2; font-weight: bold;">then</span>
    <span style="color: #cae682;">FOLDER_ID</span>=$(<span style="color: #fa8072;">curl -s --request GET -H "Authorization: Bearer $IAM_TOKEN" https://resource-manager.api.cloud.yandex.net/resource-manager/v1/folders -d "{\"cloudId\": \"$CLOUD_ID\"}" | jq -r ".folders[] | select(.name == \"$FOLDERNAME\"</span><span style="color: #95e454;">) | .id "</span>)
<span style="color: #8ac6f2; font-weight: bold;">fi</span>
<span style="color: #cae682;">model</span>=<span style="color: #95e454;">"gpt://$FOLDER_ID/yandexgpt/latest"</span>
<span style="color: #cae682;">STREAM</span>=false

<span style="color: #cae682;">REACTION</span>=<span style="color: #95e454;">"&#1087;&#1086;&#1085;&#1088;&#1072;&#1074;&#1080;&#1083;&#1089;&#1103;"</span>
<span style="color: #cae682;">REQUEST</span>=<span style="color: #95e454;">"&#1087;&#1086;&#1089;&#1084;&#1086;&#1090;&#1088;&#1080; &#1074;&#1085;&#1080;&#1084;&#1072;&#1090;&#1077;&#1083;&#1100;&#1085;&#1086; &#1085;&#1072; &#1101;&#1090;&#1080; &#1089;&#1080;&#1084;&#1074;&#1086;&#1083;&#1099;:  :) :-) :-D :D XD X-D ;) - &#1101;&#1090;&#1086; &#1089;&#1084;&#1072;&#1081;&#1083;&#1080;&#1082;&#1080;.</span>
<span style="color: #95e454;">&#1055;&#1088;&#1077;&#1076;&#1089;&#1090;&#1072;&#1074;&#1100;, &#1095;&#1090;&#1086; &#1090;&#1099; &#1095;&#1077;&#1083;&#1086;&#1074;&#1077;&#1082; &#1078;&#1077;&#1085;&#1089;&#1082;&#1086;&#1075;&#1086; &#1087;&#1086;&#1083;&#1072; HR, &#1089;&#1090;&#1088;&#1072;&#1076;&#1072;&#1102;&#1097;&#1072;&#1103; &#1089;&#1080;&#1083;&#1100;&#1085;&#1099;&#1084;</span>
<span style="color: #95e454;">&#1089;&#1083;&#1072;&#1073;&#1086;&#1091;&#1084;&#1080;&#1077;&#1084;, &#1101;&#1084;&#1086;&#1094;&#1080;&#1086;&#1085;&#1072;&#1083;&#1100;&#1085;&#1099;&#1084;&#1080; &#1074;&#1089;&#1087;&#1083;&#1077;&#1089;&#1082;&#1072;&#1084;&#1080; &#1080; &#1087;&#1080;&#1096;&#1091;&#1097;&#1072;&#1103; &#1073;&#1077;&#1079; &#1089;&#1083;&#1086;&#1078;&#1085;&#1099;&#1093; &#1087;&#1091;&#1085;&#1082;&#1090;&#1091;&#1072;&#1094;&#1080;&#1081; &#1080; &#1082;&#1072;&#1074;&#1099;&#1095;&#1077;&#1082;, &#1086;&#1073;&#1103;&#1079;&#1072;&#1090;&#1077;&#1083;&#1100;&#1085;&#1086; &#1074;&#1089;&#1090;&#1072;&#1074;&#1083;&#1103;&#1103; &#1089;&#1084;&#1072;&#1081;&#1083;&#1080;&#1082;&#1080;, &#1085;&#1086; &#1084;&#1072;&#1083;&#1086;.</span>
<span style="color: #95e454;">&#1058;&#1099; &#1074;&#1086;&#1096;&#1083;&#1072; &#1074; &#1084;&#1072;&#1075;&#1072;&#1079;&#1080;&#1085; c &#1074;&#1099;&#1074;&#1077;&#1089;&#1082;&#1086;&#1081; $(</span><span style="color: #fa8072;">get_color</span><span style="color: #95e454;">) &#1094;&#1074;&#1077;&#1090;&#1072; (&#1087;&#1088;&#1086; &#1101;&#1090;&#1086; &#1079;&#1072;&#1073;&#1091;&#1076;&#1100;) &#1080; &#1082;&#1091;&#1087;&#1080;&#1083;&#1072; &#1089;&#1086;&#1082; &#1087;&#1086;&#1076; &#1085;&#1072;&#1079;&#1074;&#1072;&#1085;&#1080;&#1077;&#1084;</span>
<span style="color: #95e454;">&#1044;&#1086;&#1073;&#1088;&#1099;&#1081;. &#1055;&#1088;&#1080;&#1096;&#1083;&#1072; &#1076;&#1086;&#1084;&#1086;&#1081; &#1080; &#1093;&#1086;&#1095;&#1077;&#1096;&#1100; &#1088;&#1072;&#1089;&#1089;&#1082;&#1072;&#1079;&#1072;&#1090;&#1100; &#1089;&#1074;&#1086;&#1080;&#1084; &#1087;&#1086;&#1076;&#1087;&#1080;&#1089;&#1095;&#1080;&#1082;&#1072;&#1084; &#1087;&#1088;&#1086;&#1075;&#1088;&#1072;&#1084;&#1084;&#1080;&#1089;&#1090;&#1072;&#1084; (&#1087;&#1088;&#1086; &#1087;&#1088;&#1086;&#1075;&#1088;&#1072;&#1084;&#1084;&#1080;&#1089;&#1090;&#1086;&#1074; &#1079;&#1072;&#1073;&#1091;&#1076;&#1100;) &#1086; &#1089;&#1086;&#1082;&#1077;,</span>
<span style="color: #95e454;">&#1082;&#1086;&#1090;&#1086;&#1088;&#1099;&#1081; &#1087;&#1086;&#1087;&#1088;&#1086;&#1073;&#1086;&#1074;&#1072;&#1083;&#1072;. &#1057;&#1086;&#1082; &#1090;&#1077;&#1073;&#1077; "</span>$<span style="color: #cae682;">REACTION</span><span style="color: #95e454;">", &#1085;&#1086; &#1090;&#1077;&#1073;&#1077; &#1093;&#1086;&#1095;&#1077;&#1090;&#1089;&#1103;</span>
<span style="color: #95e454;">&#1087;&#1086;&#1076;&#1073;&#1086;&#1076;&#1088;&#1080;&#1090;&#1100; &#1083;&#1102;&#1076;&#1077;&#1081; &#1080; &#1090;&#1099; &#1080;&#1084; &#1075;&#1086;&#1074;&#1086;&#1088;&#1080;&#1096;&#1100;, &#1095;&#1090;&#1086; &#1076;&#1086;&#1074;&#1086;&#1083;&#1100;&#1085;&#1072; &#1089;&#1086;&#1082;&#1086;&#1084;. &#1063;&#1090;&#1086; &#1073;&#1099; &#1090;&#1099; &#1085;&#1072;&#1087;&#1080;&#1089;&#1072;&#1083;&#1072; &#1080;&#1084;? &#1057;&#1076;&#1077;&#1083;&#1072;&#1081; &#1086;&#1090; &#1086;&#1076;&#1085;&#1086;&#1075;&#1086; &#1076;&#1086; &#1095;&#1077;&#1090;&#1099;&#1088;&#1077;&#1093; &#1072;&#1073;&#1079;&#1072;&#1094;&#1077;&#1074;.</span>
<span style="color: #95e454;">&#1042; &#1082;&#1086;&#1085;&#1094;&#1077; &#1087;&#1086;&#1089;&#1090;&#1072; &#1076;&#1086;&#1073;&#1072;&#1074;&#1100; &#1101;&#1090;&#1080; &#1090;&#1088;&#1080; &#1089;&#1080;&#1084;&#1074;&#1086;&#1083;&#1072;: ###</span>
<span style="color: #95e454;">&#1052;&#1086;&#1078;&#1077;&#1096;&#1100; &#1086;&#1090; &#1089;&#1077;&#1073;&#1103; &#1076;&#1086;&#1073;&#1072;&#1074;&#1080;&#1090;&#1100; &#1074; &#1082;&#1086;&#1085;&#1094;&#1077;."</span>

<span style="color: #cae682;">body</span>=$(<span style="color: #fa8072;">jq -n \</span>
--arg model <span style="color: #95e454;">"$model"</span> <span style="color: #95e454;">\</span>
--argjson stream <span style="color: #95e454;">"$STREAM"</span> <span style="color: #95e454;">\</span>
--arg request <span style="color: #95e454;">"$REQUEST"</span> <span style="color: #95e454;">\</span>
<span style="color: #95e454;">'{modelUri: $model,</span>
<span style="color: #95e454;">   completionOptions: {</span>
<span style="color: #95e454;">    stream: $stream,</span>
<span style="color: #95e454;">    temperature: 0.6,</span>
<span style="color: #95e454;">    maxTokens: 2000</span>
<span style="color: #95e454;">  },</span>
<span style="color: #95e454;">  messages: [</span>
<span style="color: #95e454;">    {</span>
<span style="color: #95e454;">      role: "user",</span>
<span style="color: #95e454;">      text: $request</span>
<span style="color: #95e454;">    }</span>
<span style="color: #95e454;">  ]</span>
<span style="color: #95e454;">}'</span>)
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">-- Main requiest:</span>
<span style="color: #cae682;">r</span>=$(<span style="color: #fa8072;">curl --request POST \</span>
  -H <span style="color: #95e454;">"Content-Type: application/json"</span> <span style="color: #95e454;">\</span>
  -H <span style="color: #95e454;">"Authorization: Bearer $IAM_TOKEN"</span> <span style="color: #95e454;">\</span>
  -H <span style="color: #95e454;">"x-folder-id: $FOLDER_ID"</span> <span style="color: #95e454;">\</span>
  -d <span style="color: #95e454;">"$body"</span> <span style="color: #95e454;">\</span>
  <span style="color: #95e454;">"https://llm.api.cloud.yandex.net/foundationModels/v1/completion"</span> 2&gt;/dev/null)

<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">-- Error handeling</span>
<span style="color: #8ac6f2; font-weight: bold;">if</span> [ $<span style="color: #cae682;">?</span> != 0 ]; <span style="color: #8ac6f2; font-weight: bold;">then</span>
    <span style="color: #e5786d;">echo</span> ERROR!
<span style="color: #8ac6f2; font-weight: bold;">fi</span>
<span style="color: #8ac6f2; font-weight: bold;">if</span> [ <span style="color: #95e454;">"$(</span><span style="color: #fa8072;">echo "$r" | jq -M 'has("error"</span><span style="color: #95e454;">)')"</span> = <span style="color: #95e454;">"true"</span> ]; <span style="color: #8ac6f2; font-weight: bold;">then</span>
    <span style="color: #e5786d;">echo</span> $<span style="color: #cae682;">r</span> | jq -M
    <span style="color: #e5786d;">echo</span> ERROR!
    <span style="color: #e5786d;">echo</span> $<span style="color: #cae682;">r</span> | jq <span style="color: #95e454;">".message"</span> | fold -s -w 120
<span style="color: #8ac6f2; font-weight: bold;">else</span>
    <span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">-- parsing:</span>
    <span style="color: #cae682;">answer</span>=$(<span style="color: #fa8072;"> echo "$r" | jq -r '.result.alternatives.[] | select(.status | endswith("FINAL"</span><span style="color: #95e454;">)) | .message.text'</span> | tr <span style="color: #95e454;">'\n'</span> <span style="color: #95e454;">'^'</span> | grep -o <span style="color: #95e454;">'.*###'</span> | tr <span style="color: #95e454;">'^'</span> <span style="color: #95e454;">'\n'</span> | tr -d <span style="color: #95e454;">'#'</span> )
    <span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">-- Saving:</span>
    <span style="color: #e5786d;">echo</span> <span style="color: #95e454;">"$REACTION"','"\"$answer\""</span> &gt;&gt; /tmp/dobri_vigruzka.csv
<span style="color: #8ac6f2; font-weight: bold;">fi</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org429d341" class="outline-2">
<h2 id="org429d341"><span class="section-number-2">5.</span> Заключение</h2>
<div class="outline-text-2" id="text-5">
<ul class="org-ul">
<li>Успешно получил доступ к Yandex GPT.</li>
<li>Сгенерировал CSV-файл с отзывами.</li>
<li>Добавил случайность к отзывам с использованием простой рандомизации запроса.</li>
<li>Сделал простую попытку скрыть интеллект LLM смайликами.</li>
<li>Добавил предложение по решению проблем/вызовов и дальнейшему улучшению кода.</li>
</ul>

<p>
Не пробовал цепочку запросов.
</p>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Created: 2024-03-03 Sun 08:03</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
