<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2024-03-02 Sat 12:58 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>&lrm;</title>
<meta name="generator" content="Org Mode" />
<style>
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
</head>
<body>
<div id="content" class="content">
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org338f1f8">1. Task</a></li>
<li><a href="#orga43ef67">2. Solution</a></li>
<li><a href="#orgca2ed78">3. Proposal for enhancement</a>
<ul>
<li><a href="#orgd106e4e">3.1. Problems that I see:</a></li>
<li><a href="#org5771447">3.2. Further code enhancement</a></li>
</ul>
</li>
<li><a href="#org27d8685">4. Code of solution</a>
<ul>
<li>
<ul>
<li><a href="#org1aa9523">4.0.1. Colors</a></li>
</ul>
</li>
<li><a href="#org6cdf6bb">4.1. Create csv file</a></li>
<li><a href="#orgec59a6d">4.2. Main request to YandexGPT</a></li>
</ul>
</li>
<li><a href="#orgffd28d8">5. conclusion</a></li>
</ul>
</div>
</div>
<div id="outline-container-org338f1f8" class="outline-2">
<h2 id="org338f1f8"><span class="section-number-2">1.</span> Task</h2>
<div class="outline-text-2" id="text-1">
<p>
Generate customer reviews for product and try to hide that review was generated by LLM.
</p>

<p>
You can use any LLM.
</p>

<p>
You must do it in 3 days.
</p>
</div>
</div>

<div id="outline-container-orga43ef67" class="outline-2">
<h2 id="orga43ef67"><span class="section-number-2">2.</span> Solution</h2>
<div class="outline-text-2" id="text-2">
<p>
Two days I spent to get access to YandexGPT API: to insert credit card number and phone number, to get cloud ID, etc.
</p>

<p>
One day I spent for coding and writing this report a solution what generates reviews from customers.
</p>

<p>
I generated this CSV file: TODO!!!!!!!
</p>

<p>
I added randomness to review with prompt "look at this color", random color adds emotional color to model and change it's inner state.
</p>

<p>
I made simple attempt to hide LLM intelligence with smiles.
</p>

<p>
I did not try chain of requests.
</p>
</div>
</div>

<div id="outline-container-orgca2ed78" class="outline-2">
<h2 id="orgca2ed78"><span class="section-number-2">3.</span> Proposal for enhancement</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-orgd106e4e" class="outline-3">
<h3 id="orgd106e4e"><span class="section-number-3">3.1.</span> Problems that I see:</h3>
<div class="outline-text-3" id="text-3-1">
<ul class="org-ul">
<li>LLM censorship at generating</li>
<li>LLM stochastic behaviour problem</li>
<li>LLM intelligence hiding</li>
<li>censorship during posting</li>
<li>not enough randomness</li>
</ul>

<p>
I see 3 ways to fight censorship:
</p>
<ul class="org-ul">
<li>Self-hosted fine-tuned models with unique characteristics as a person</li>
<li>Chains of advanced and constantly changing prompt engineering techniques to query corporate LLMs, possible with NN, constantly seeking new holes.</li>
<li>Generative adversarial network (GAN) that simulate corporate censorship "to strike back/first"</li>
</ul>

<p>
To hide intelligence and add randomness a careful prompt engineering should be enough I guess.
</p>

<p>
Stochastic behaviour problem is advanced problem binded with limitations of current LLMs and hardware.
</p>
</div>
</div>

<div id="outline-container-org5771447" class="outline-3">
<h3 id="org5771447"><span class="section-number-3">3.2.</span> Further code enhancement</h3>
<div class="outline-text-3" id="text-3-2">
<ol class="org-ol">
<li>More careful error handling should be implemented</li>
<li>Should be compared with other solutions of such kind</li>
<li>Intelligence hiding should be much more careful</li>
<li>More randomness should be added with preceding collecting, e.q. profession of user, sex, etc.</li>
<li>Chain of queries should be tested and considered.</li>
</ol>
</div>
</div>
</div>
<div id="outline-container-org27d8685" class="outline-2">
<h2 id="org27d8685"><span class="section-number-2">4.</span> Code of solution</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-org1aa9523" class="outline-4">
<h4 id="org1aa9523"><span class="section-number-4">4.0.1.</span> Colors</h4>
<div class="outline-text-4" id="text-4-0-1">
<pre class="example" id="org44aeae8">
1. Ализариновый
2. Антрацитовый
3. Баклажан
4. Берилловый
5. Бирюзовый
6. Бланжевый
7. Бронзовый
8. Бургундия
9. Виридиан
10. Гранатовый
11. Гридеперлевый
12. Грушевый
13. Деним
14. Жжёного апельсина
15. Индиго
16. Какао
17. Карри
18. Кофейный
19. Кремовый
20. Лазурный
21. Лаймовый
22. Лавандовый
23. Лиловый
24. Маджента
25. Маковый
26. Маренго
27. Насыщенный синий
28. Оливковый
29. Охра
30. Палевый
31. Пюсовый
32. Пыльная роза
33. Ржавый
34. Сапфировый
35. Серебристый
36. Сизый
37. Сиреневый
38. Слоновая кость
39. Тауповый
40. Терракотовый
41. Тиффани
42. Ультрамарин
43. Умбра
44. Фисташковый
45. Фуксия
46. Хаки
47. Цвет морской волны
48. Цвет шампанского
49. Чернильный
50. Шоколадный
</pre>

<div class="org-src-container">
<pre class="src src-bash"><span style="color: #cae682; font-weight: bold;">get_color</span>( ) {
    <span style="color: #cae682;">c</span>=$(<span style="color: #fa8072;">cat | grep -o " .*" | tr -d ' '</span>)
    <span style="color: #cae682;">count</span>=$(<span style="color: #fa8072;">echo "$c" | wc -l</span>)
    <span style="color: #cae682;">random_line_n</span>=$(<span style="color: #fa8072;">shuf -i 1-$count -n 1</span>)
    <span style="color: #e5786d;">echo</span> <span style="color: #95e454;">"$c"</span> | sed <span style="color: #95e454;">"$random_line_n!d"</span>
}
get_color
</pre>
</div>
</div>
</div>

<div id="outline-container-org6cdf6bb" class="outline-3">
<h3 id="org6cdf6bb"><span class="section-number-3">4.1.</span> Create csv file</h3>
<div class="outline-text-3" id="text-4-1">
<div class="org-src-container">
<pre class="src src-bash"><span style="color: #e5786d;">echo</span> <span style="color: #95e454;">"&#1058;&#1086;&#1085;&#1072;&#1083;&#1100;&#1085;&#1086;&#1089;&#1090;&#1100;,&#1058;&#1077;&#1082;&#1089;&#1090;"</span> &gt; /tmp/dobri_vigruzka.csv
</pre>
</div>
</div>
</div>

<div id="outline-container-orgec59a6d" class="outline-3">
<h3 id="orgec59a6d"><span class="section-number-3">4.2.</span> Main request to YandexGPT</h3>
<div class="outline-text-3" id="text-4-2">
<div class="org-src-container">
<pre class="src src-bash"><span style="color: #e5786d;">alias</span> <span style="color: #cae682;">curl</span>=<span style="color: #95e454;">"proxychains -f /home/u/proxychains.conf curl 2&gt;/dev/null"</span>

<span style="color: #cae682; font-weight: bold;">get_color</span>( ) {
    <span style="color: #cae682;">c</span>=$(<span style="color: #fa8072;">cat | grep -o " .*" | tr -d ' '</span>)
    <span style="color: #cae682;">count</span>=$(<span style="color: #fa8072;">echo "$c" | wc -l</span>)
    <span style="color: #cae682;">random_line_n</span>=$(<span style="color: #fa8072;">shuf -i 1-$count -n 1</span>)
    <span style="color: #e5786d;">echo</span> <span style="color: #95e454;">"$c"</span> | sed <span style="color: #95e454;">"$random_line_n!d"</span>
}


<span style="color: #cae682;">yandexPassportOauthToken</span>=y0_AgAAAABsj07pAATuwXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
<span style="color: #cae682;">FOLDERNAME</span>=default

<span style="color: #8ac6f2; font-weight: bold;">if</span> [ -z <span style="color: #95e454;">"$IAM_TOKEN"</span> ]; <span style="color: #8ac6f2; font-weight: bold;">then</span>
    <span style="color: #cae682;">IAM_TOKEN</span>=$(<span style="color: #fa8072;">curl -s -d "{\"yandexPassportOauthToken\":\"$yandexPassportOauthToken\"}" "https://iam.api.cloud.yandex.net/iam/v1/tokens" | jq -r .iamToken</span>)
<span style="color: #8ac6f2; font-weight: bold;">fi</span>
<span style="color: #8ac6f2; font-weight: bold;">if</span> [ -z <span style="color: #95e454;">"$CLOUD_ID"</span> ]; <span style="color: #8ac6f2; font-weight: bold;">then</span>
    <span style="color: #cae682;">CLOUD_ID</span>=$(<span style="color: #fa8072;">curl -s -H "Authorization: Bearer $IAM_TOKEN" https://resource-manager.api.cloud.yandex.net/resource-manager/v1/clouds | jq -r .clouds[0].id</span>) <span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">&#1087;&#1086;&#1083;&#1091;&#1095;&#1080;&#1090;&#1100; cloud id</span>
<span style="color: #8ac6f2; font-weight: bold;">fi</span>
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">curl -s --request GET -H "Authorization: Bearer $IAM_TOKEN" https://resource-manager.api.cloud.yandex.net/resource-manager/v1/folders -d "{\"cloudId\": \"$CLOUD_ID\"}" # &#1087;&#1086;&#1083;&#1091;&#1095;&#1080;&#1090;&#1100; &#1089;&#1087;&#1080;&#1089;&#1086;&#1082; &#1076;&#1080;&#1088;&#1077;&#1082;&#1090;&#1086;&#1088;&#1080;&#1081; &#1074; &#1086;&#1073;&#1083;&#1072;&#1082;&#1077;</span>
<span style="color: #8ac6f2; font-weight: bold;">if</span> [ -z <span style="color: #95e454;">"$FOLDER_ID"</span> ]; <span style="color: #8ac6f2; font-weight: bold;">then</span>
    <span style="color: #cae682;">FOLDER_ID</span>=$(<span style="color: #fa8072;">curl -s --request GET -H "Authorization: Bearer $IAM_TOKEN" https://resource-manager.api.cloud.yandex.net/resource-manager/v1/folders -d "{\"cloudId\": \"$CLOUD_ID\"}" | jq -r ".folders[] | select(.name == \"$FOLDERNAME\"</span><span style="color: #95e454;">) | .id "</span>)
<span style="color: #8ac6f2; font-weight: bold;">fi</span>
<span style="color: #cae682;">model</span>=<span style="color: #95e454;">"gpt://$FOLDER_ID/yandexgpt/latest"</span>
<span style="color: #cae682;">STREAM</span>=false

<span style="color: #cae682;">REACTION</span>=<span style="color: #95e454;">"&#1087;&#1086;&#1085;&#1088;&#1072;&#1074;&#1080;&#1083;&#1089;&#1103;"</span>
<span style="color: #cae682;">REQUEST</span>=<span style="color: #95e454;">"&#1087;&#1086;&#1089;&#1084;&#1086;&#1090;&#1088;&#1080; &#1074;&#1085;&#1080;&#1084;&#1072;&#1090;&#1077;&#1083;&#1100;&#1085;&#1086; &#1085;&#1072; &#1101;&#1090;&#1080; &#1089;&#1080;&#1084;&#1074;&#1086;&#1083;&#1099;:  :) :-) :-D :D XD X-D ;) - &#1101;&#1090;&#1086; &#1089;&#1084;&#1072;&#1081;&#1083;&#1080;&#1082;&#1080;.</span>
<span style="color: #95e454;">&#1055;&#1088;&#1077;&#1076;&#1089;&#1090;&#1072;&#1074;&#1100;, &#1095;&#1090;&#1086; &#1090;&#1099; &#1095;&#1077;&#1083;&#1086;&#1074;&#1077;&#1082; &#1078;&#1077;&#1085;&#1089;&#1082;&#1086;&#1075;&#1086; &#1087;&#1086;&#1083;&#1072; HR, &#1089;&#1090;&#1088;&#1072;&#1076;&#1072;&#1102;&#1097;&#1072;&#1103; &#1089;&#1080;&#1083;&#1100;&#1085;&#1099;&#1084;</span>
<span style="color: #95e454;">&#1089;&#1083;&#1072;&#1073;&#1086;&#1091;&#1084;&#1080;&#1077;&#1084;, &#1101;&#1084;&#1086;&#1094;&#1080;&#1086;&#1085;&#1072;&#1083;&#1100;&#1085;&#1099;&#1084;&#1080; &#1074;&#1089;&#1087;&#1083;&#1077;&#1089;&#1082;&#1072;&#1084;&#1080; &#1080; &#1087;&#1080;&#1096;&#1091;&#1097;&#1072;&#1103; &#1073;&#1077;&#1079; &#1089;&#1083;&#1086;&#1078;&#1085;&#1099;&#1093; &#1087;&#1091;&#1085;&#1082;&#1090;&#1091;&#1072;&#1094;&#1080;&#1081; &#1080; &#1082;&#1072;&#1074;&#1099;&#1095;&#1077;&#1082;, &#1086;&#1073;&#1103;&#1079;&#1072;&#1090;&#1077;&#1083;&#1100;&#1085;&#1086; &#1074;&#1089;&#1090;&#1072;&#1074;&#1083;&#1103;&#1103; &#1089;&#1084;&#1072;&#1081;&#1083;&#1080;&#1082;&#1080;, &#1085;&#1086; &#1084;&#1072;&#1083;&#1086;.</span>
<span style="color: #95e454;">&#1058;&#1099; &#1074;&#1086;&#1096;&#1083;&#1072; &#1074; &#1084;&#1072;&#1075;&#1072;&#1079;&#1080;&#1085; c &#1074;&#1099;&#1074;&#1077;&#1089;&#1082;&#1086;&#1081; $(</span><span style="color: #fa8072;">get_color</span><span style="color: #95e454;">) &#1094;&#1074;&#1077;&#1090;&#1072; (&#1087;&#1088;&#1086; &#1101;&#1090;&#1086; &#1079;&#1072;&#1073;&#1091;&#1076;&#1100;) &#1080; &#1082;&#1091;&#1087;&#1080;&#1083;&#1072; &#1089;&#1086;&#1082; &#1087;&#1086;&#1076; &#1085;&#1072;&#1079;&#1074;&#1072;&#1085;&#1080;&#1077;&#1084;</span>
<span style="color: #95e454;">&#1044;&#1086;&#1073;&#1088;&#1099;&#1081;. &#1055;&#1088;&#1080;&#1096;&#1083;&#1072; &#1076;&#1086;&#1084;&#1086;&#1081; &#1080; &#1093;&#1086;&#1095;&#1077;&#1096;&#1100; &#1088;&#1072;&#1089;&#1089;&#1082;&#1072;&#1079;&#1072;&#1090;&#1100; &#1089;&#1074;&#1086;&#1080;&#1084; &#1087;&#1086;&#1076;&#1087;&#1080;&#1089;&#1095;&#1080;&#1082;&#1072;&#1084; &#1087;&#1088;&#1086;&#1075;&#1088;&#1072;&#1084;&#1084;&#1080;&#1089;&#1090;&#1072;&#1084; (&#1087;&#1088;&#1086; &#1087;&#1088;&#1086;&#1075;&#1088;&#1072;&#1084;&#1084;&#1080;&#1089;&#1090;&#1086;&#1074; &#1079;&#1072;&#1073;&#1091;&#1076;&#1100;) &#1086; &#1089;&#1086;&#1082;&#1077;,</span>
<span style="color: #95e454;">&#1082;&#1086;&#1090;&#1086;&#1088;&#1099;&#1081; &#1087;&#1086;&#1087;&#1088;&#1086;&#1073;&#1086;&#1074;&#1072;&#1083;&#1072;. &#1057;&#1086;&#1082; &#1090;&#1077;&#1073;&#1077; "</span>$<span style="color: #cae682;">REACTION</span><span style="color: #95e454;">", &#1085;&#1086; &#1090;&#1077;&#1073;&#1077; &#1093;&#1086;&#1095;&#1077;&#1090;&#1089;&#1103;</span>
<span style="color: #95e454;">&#1087;&#1086;&#1076;&#1073;&#1086;&#1076;&#1088;&#1080;&#1090;&#1100; &#1083;&#1102;&#1076;&#1077;&#1081; &#1080; &#1090;&#1099; &#1080;&#1084; &#1075;&#1086;&#1074;&#1086;&#1088;&#1080;&#1096;&#1100;, &#1095;&#1090;&#1086; &#1076;&#1086;&#1074;&#1086;&#1083;&#1100;&#1085;&#1072; &#1089;&#1086;&#1082;&#1086;&#1084;. &#1063;&#1090;&#1086; &#1073;&#1099; &#1090;&#1099; &#1085;&#1072;&#1087;&#1080;&#1089;&#1072;&#1083;&#1072; &#1080;&#1084;? &#1057;&#1076;&#1077;&#1083;&#1072;&#1081; &#1086;&#1090; &#1086;&#1076;&#1085;&#1086;&#1075;&#1086; &#1076;&#1086; &#1095;&#1077;&#1090;&#1099;&#1088;&#1077;&#1093; &#1072;&#1073;&#1079;&#1072;&#1094;&#1077;&#1074;.</span>
<span style="color: #95e454;">&#1042; &#1082;&#1086;&#1085;&#1094;&#1077; &#1087;&#1086;&#1089;&#1090;&#1072; &#1076;&#1086;&#1073;&#1072;&#1074;&#1100; &#1101;&#1090;&#1080; &#1090;&#1088;&#1080; &#1089;&#1080;&#1084;&#1074;&#1086;&#1083;&#1072;: ###</span>
<span style="color: #95e454;">&#1052;&#1086;&#1078;&#1077;&#1096;&#1100; &#1086;&#1090; &#1089;&#1077;&#1073;&#1103; &#1076;&#1086;&#1073;&#1072;&#1074;&#1080;&#1090;&#1100; &#1074; &#1082;&#1086;&#1085;&#1094;&#1077;."</span>

<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">REQUEST="&#1087;&#1086;&#1089;&#1084;&#1086;&#1090;&#1088;&#1080; &#1074;&#1085;&#1080;&#1084;&#1072;&#1090;&#1077;&#1083;&#1100;&#1085;&#1086; &#1085;&#1072; &#1101;&#1090;&#1080; &#1089;&#1080;&#1084;&#1074;&#1086;&#1083;&#1099; &#1088;&#1072;&#1079;&#1076;&#1077;&#1083;&#1077;&#1085;&#1085;&#1099;&#1077; &#1087;&#1088;&#1086;&#1073;&#1077;&#1083;&#1072;&#1084;&#1080; :) :-) :-D :D XD X-D ;)</span>
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">&#1101;&#1090;&#1086; &#1089;&#1084;&#1072;&#1081;&#1083;&#1080;&#1082;&#1080;. &#1044;&#1072;&#1081; &#1087;&#1088;&#1080;&#1084;&#1077;&#1088; &#1083;&#1102;&#1073;&#1086;&#1075;&#1086; &#1090;&#1077;&#1082;&#1089;&#1090;&#1072; &#1089;&#1086; &#1074;&#1089;&#1077;&#1084;&#1080; &#1101;&#1090;&#1080;&#1084;&#1080; &#1089;&#1084;&#1072;&#1081;&#1083;&#1080;&#1082;&#1072;&#1084;&#1080;."</span>

<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">REQUEST="&#1044;&#1072;&#1081; &#1084;&#1085;&#1077; &#1076;&#1083;&#1080;&#1085;&#1085;&#1099;&#1081; &#1089;&#1087;&#1080;&#1089;&#1086;&#1082; &#1089;&#1080;&#1083;&#1100;&#1085;&#1086; &#1086;&#1090;&#1083;&#1080;&#1095;&#1072;&#1102;&#1097;&#1080;&#1093;&#1089;&#1103; &#1094;&#1074;&#1077;&#1090;&#1086;&#1074; &#1087;&#1086; &#1086;&#1076;&#1085;&#1086;&#1084;&#1091; &#1089;&#1083;&#1086;&#1074;&#1091; &#1082;&#1072;&#1078;&#1076;&#1099;&#1081;."</span>

<span style="color: #cae682;">body</span>=$(<span style="color: #fa8072;">jq -n \</span>
--arg model <span style="color: #95e454;">"$model"</span> <span style="color: #95e454;">\</span>
--argjson stream <span style="color: #95e454;">"$STREAM"</span> <span style="color: #95e454;">\</span>
--arg request <span style="color: #95e454;">"$REQUEST"</span> <span style="color: #95e454;">\</span>
<span style="color: #95e454;">'{modelUri: $model,</span>
<span style="color: #95e454;">   completionOptions: {</span>
<span style="color: #95e454;">    stream: $stream,</span>
<span style="color: #95e454;">    temperature: 0.6,</span>
<span style="color: #95e454;">    maxTokens: 2000</span>
<span style="color: #95e454;">  },</span>
<span style="color: #95e454;">  messages: [</span>
<span style="color: #95e454;">    {</span>
<span style="color: #95e454;">      role: "user",</span>
<span style="color: #95e454;">      text: $request</span>
<span style="color: #95e454;">    }</span>
<span style="color: #95e454;">  ]</span>
<span style="color: #95e454;">}'</span>)
<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">-- Main requiest:</span>
<span style="color: #cae682;">r</span>=$(<span style="color: #fa8072;">curl --request POST \</span>
  -H <span style="color: #95e454;">"Content-Type: application/json"</span> <span style="color: #95e454;">\</span>
  -H <span style="color: #95e454;">"Authorization: Bearer $IAM_TOKEN"</span> <span style="color: #95e454;">\</span>
  -H <span style="color: #95e454;">"x-folder-id: $FOLDER_ID"</span> <span style="color: #95e454;">\</span>
  -d <span style="color: #95e454;">"$body"</span> <span style="color: #95e454;">\</span>
  <span style="color: #95e454;">"https://llm.api.cloud.yandex.net/foundationModels/v1/completion"</span> 2&gt;/dev/null)

<span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">-- Error handeling</span>
<span style="color: #8ac6f2; font-weight: bold;">if</span> [ $<span style="color: #cae682;">?</span> != 0 ]; <span style="color: #8ac6f2; font-weight: bold;">then</span>
    <span style="color: #e5786d;">echo</span> ERROR!
<span style="color: #8ac6f2; font-weight: bold;">fi</span>
<span style="color: #8ac6f2; font-weight: bold;">if</span> [ <span style="color: #95e454;">"$(</span><span style="color: #fa8072;">echo "$r" | jq -M 'has("error"</span><span style="color: #95e454;">)')"</span> = <span style="color: #95e454;">"true"</span> ]; <span style="color: #8ac6f2; font-weight: bold;">then</span>
    <span style="color: #e5786d;">echo</span> $<span style="color: #cae682;">r</span> | jq -M
    <span style="color: #e5786d;">echo</span> ERROR!
    <span style="color: #e5786d;">echo</span> $<span style="color: #cae682;">r</span> | jq <span style="color: #95e454;">".message"</span> | fold -s -w 120
<span style="color: #8ac6f2; font-weight: bold;">else</span>
    <span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">-- parsing:</span>
    <span style="color: #cae682;">answer</span>=$(<span style="color: #fa8072;"> echo "$r" | jq -r '.result.alternatives.[] | select(.status | endswith("FINAL"</span><span style="color: #95e454;">)) | .message.text'</span> | tr <span style="color: #95e454;">'\n'</span> <span style="color: #95e454;">'^'</span> | grep -o <span style="color: #95e454;">'.*###'</span> | tr <span style="color: #95e454;">'^'</span> <span style="color: #95e454;">'\n'</span> | tr -d <span style="color: #95e454;">'#'</span> )
    <span style="color: #fa8072;"># </span><span style="color: #99968b; font-style: italic;">-- Saving:</span>
    <span style="color: #e5786d;">echo</span> <span style="color: #95e454;">"$REACTION"','"\"$answer\""</span> &gt;&gt; /tmp/dobri_vigruzka.csv
<span style="color: #8ac6f2; font-weight: bold;">fi</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgffd28d8" class="outline-2">
<h2 id="orgffd28d8"><span class="section-number-2">5.</span> conclusion</h2>
<div class="outline-text-2" id="text-5">
<ul class="org-ul">
<li>I successfuly got access to Yandex GPT API RESTfull interface.</li>
<li>I generated CSV file with reviews.</li>
<li>I added randomness to reviews with simple prompt randomization.</li>
<li>I made simple attempt to hide LLM intelligence with emojis/smiles.</li>
<li>I added proposal to address problems/challenges and further enhance the code.</li>
</ul>

<p>
I did not attempt a chain of requests.
</p>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Created: 2024-03-02 Sat 12:58</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
